{"remainingRequest":"/Users/robert/project/vue/通用vue3/project/node_modules/babel-loader/lib/index.js!/Users/robert/project/vue/通用vue3/project/node_modules/eslint-loader/index.js??ref--13-0!/Users/robert/project/vue/通用vue3/project/src/store/modules/user.js","dependencies":[{"path":"/Users/robert/project/vue/通用vue3/project/src/store/modules/user.js","mtime":1557319693792},{"path":"/Users/robert/project/vue/通用vue3/project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/robert/project/vue/通用vue3/project/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/robert/project/vue/通用vue3/project/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport _Promise from \"/Users/robert/project/vue/\\u901A\\u7528vue3/project/node_modules/@babel/runtime-corejs2/core-js/promise\";\nimport { login, logout } from '@/api/login';\nimport { getToken, setToken, removeToken } from '@/utils/auth';\nimport { StaticRouterMap } from '../../router/index';\nvar user = {\n  state: {\n    token: getToken(),\n    name: '',\n    avatar: '',\n    RouterList: [] // 动态路由\n\n  },\n  mutations: {\n    SET_TOKEN: function SET_TOKEN(state, token) {\n      state.token = token;\n    },\n    SET_NAME: function SET_NAME(state, name) {\n      state.name = name;\n    },\n    SET_AVATAR: function SET_AVATAR(state, avatar) {\n      state.avatar = avatar;\n    },\n    set_router: function set_router(state, RouterList) {\n      state.RouterList = RouterList;\n    }\n  },\n  actions: {\n    // 登录\n    Login: function Login(_ref, userInfo) {\n      var commit = _ref.commit;\n      var username = userInfo.username.trim();\n      return new _Promise(function (resolve, reject) {\n        login(username, userInfo.password).then(function (response) {\n          var data = response.data.data; // cookie存储token\n\n          setToken(data.token); // vuex存储token 用户名 头像\n\n          commit('SET_TOKEN', data.token);\n          commit('SET_NAME', data.name);\n          commit('SET_AVATAR', data.avatar);\n          localStorage.setItem('SET_NAME', data.name);\n          localStorage.setItem('SET_AVATAR', data.avatar);\n          resolve();\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    },\n    // 动态设置路由 此为设置设置途径\n    setRouterList: function setRouterList(_ref2, routerList) {\n      var commit = _ref2.commit;\n      commit('set_router', StaticRouterMap.concat(routerList)); // 进行路由拼接并存储\n    },\n    // 登出\n    LogOut: function LogOut(_ref3) {\n      var commit = _ref3.commit,\n          state = _ref3.state;\n      return new _Promise(function (resolve, reject) {\n        logout(state.token).then(function () {\n          commit('SET_TOKEN', '');\n          commit('SET_NAME', '');\n          commit('SET_AVATAR', '');\n          commit('set_router', []);\n          removeToken();\n          resolve();\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    },\n    // 前端 登出\n    FedLogOut: function FedLogOut(_ref4) {\n      var commit = _ref4.commit;\n      return new _Promise(function (resolve) {\n        commit('SET_TOKEN', '');\n        removeToken();\n        resolve();\n      });\n    }\n  }\n};\nexport default user;",{"version":3,"sources":["/Users/robert/project/vue/通用vue3/project/src/store/modules/user.js"],"names":["login","logout","getToken","setToken","removeToken","StaticRouterMap","user","state","token","name","avatar","RouterList","mutations","SET_TOKEN","SET_NAME","SET_AVATAR","set_router","actions","Login","userInfo","commit","username","trim","resolve","reject","password","then","response","data","localStorage","setItem","catch","error","setRouterList","routerList","concat","LogOut","FedLogOut"],"mappings":"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","sourcesContent":["import { login, logout } from '@/api/login'\nimport { getToken, setToken, removeToken } from '@/utils/auth'\nimport { StaticRouterMap } from '../../router/index'\nconst user = {\n  state: {\n    token: getToken(),\n    name: '',\n    avatar: '',\n    RouterList: [] // 动态路由\n  },\n\n  mutations: {\n    SET_TOKEN: (state, token) => {\n      state.token = token\n    },\n    SET_NAME: (state, name) => {\n      state.name = name\n    },\n    SET_AVATAR: (state, avatar) => {\n      state.avatar = avatar\n    },\n    set_router: (state, RouterList) => {\n      state.RouterList = RouterList\n    }\n  },\n\n  actions: {\n    // 登录\n    Login({ commit }, userInfo) {\n      const username = userInfo.username.trim()\n      return new Promise((resolve, reject) => {\n        login(username, userInfo.password)\n          .then(response => {\n            const data = response.data.data\n            // cookie存储token\n            setToken(data.token)\n            // vuex存储token 用户名 头像\n            commit('SET_TOKEN', data.token)\n            commit('SET_NAME', data.name)\n            commit('SET_AVATAR', data.avatar)\n            localStorage.setItem('SET_NAME',data.name)\n            localStorage.setItem('SET_AVATAR',data.avatar)\n            resolve()\n          })\n          .catch(error => {\n            reject(error)\n          })\n      })\n    },\n    // 动态设置路由 此为设置设置途径\n    setRouterList({ commit }, routerList) {\n      commit('set_router', StaticRouterMap.concat(routerList)) // 进行路由拼接并存储\n    },\n    // 登出\n    LogOut({ commit, state }) {\n      return new Promise((resolve, reject) => {\n        logout(state.token)\n          .then(() => {\n            commit('SET_TOKEN', '')\n            commit('SET_NAME', '')\n            commit('SET_AVATAR', '')\n            commit('set_router', [])\n            removeToken()\n            resolve()\n          })\n          .catch(error => {\n            reject(error)\n          })\n      })\n    },\n\n    // 前端 登出\n    FedLogOut({ commit }) {\n      return new Promise(resolve => {\n        commit('SET_TOKEN', '')\n        removeToken()\n        resolve()\n      })\n    }\n  }\n}\n\nexport default user\n"]}]}